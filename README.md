# UnityCCR

### Используемые технологии
+ Zenject
+ UnityWebRequest
+ Unirx (таймеры, подписки фокуса и закрытия приложения)
+ Dotween
+ Addressables

### Версия Unity
+ 2022.3.29f1

### Паттерны
+ MVP
+ Кастомный ListPool
+ GoF, StateMachine, GRASP 

### UI

+ Разрешение 1284x2778 (iPhone 12 Pro Max)
+ Протестировано на iPhone 12 Pro Max, iPad Pro 12.9, Samsung Galaxy
+ SafeArea добавлена
+ Вертикалка

### Editor

Сверху есть вкладка Helper
+ Data - для очистки, сохранения и просмотра сейвов
+ Scenes - для перехода между сценами

### Иерархия папок проекта

+ App
+ + Art - весь арт
+ + Sounds - звуки
+ + Common - шаблонный код
+ + + AssemblyManager - осуществляет поиск классов с атрибутами в решении
+ + + AssetSystem - для работы с Addressables
+ + + Audio - работа со звуком
+ + + SpriteLoaders - загрузка спрайтов
+ + + Data - сейвы
+ + + FSM - реализация конечного автомата для инициализации приложения
+ + + Web - для удобной загрузки данных с сервера
+ + + Utilities - вспомогательные классы (пулы, расширения и т.д.)
+ + + и др менее крупные модули
+ + Core - код пректа
+ + + Configs - конфиги ScriptableObject
+ + + Currency - классы для работы с валютами
+ + + Startups - адаптеры zenject, система конфигурации
+ + + Menu - здесь самая важная логика игры
+ + + + Presenter/States
+ + + + + Clicker - 1 вкладка
+ + + + + Dogs - 2 вкладка
+ + + + + Weather - 3 вкладка
+ + + и др менее крупные модули

### Структура любой механики

Механики оформлены как пакеты по рекомендации unity

https://docs.unity3d.com/6000.1/Documentation/Manual/cus-layout.html
+ Content - префабы, конфиги
+ External - весь код, который завязан на unity
+ Runtime - код, который не зависит от юнити и его можно тестировать
+ Tests - тесты

В папке External часто лежит класс *Configurator, 
в нём регистрируются классы в DI, в стадию инициализации с указанием сцены и 
порядка, глобальные данные для сохранения
(валюты)  

PS: Runtime папка чаще используется в Common. Обычно для Core я тоже использую папку Runtime, но для этого требуется больше времени.

### Web

В папке App/Common/Web есть класс WebRequestManager  
Он позволяет удобно создавать запросы, которые возвращают результат в виде дто класса, 
спрайта. Отменять их по id и ставить в очередь.

## Кликер

В конфиге App/Core/Configs/EnergyConfig
+ StartValue - стартовое значение энергии
+ MaxValue - максимальное значение энергии

В конфиге App/Core/Configs/ClickerConfig
+ AutoCollectionTimerInterval - частота автосбора в сек
+ AutoCollectionTimerEnergyPrice - стоимость энергии за автосбор
+ AutoCollectionTimerSoftIncome - доход от автосбора
+ ClickEnergyPrice - стоимость энергии за клик
+ ClickSoftIncome - доход от клика
+ EnergyRecoveryInterval - интервал восстановления энергии в сек
+ EnergyRecoveryValue - количество восстанавливаемой энергии за интервал

Важные моменты:
+ Автосбор и клики не работают, если не хватает энергии
+ Значение софты и энергии сохраняются

## Погода

В конфиге App/Core/Configs/WeatherConfig
+ RequestInterval - интервал между запросами (по дефолту 5)

Важные моменты:
+ При переходе на вкладку сразу отправляется запрос и будет обновлять каждые <интервал> сек
+ Для отображения, выбирается первый элемент из списка, т.е. ближайшая информация о погоде
+ После получаения информации о погоде, она выводится и ставится запрос на загрузку картинки, которая выводится после

## Породы собак

В конфиге App/Core/Configs/DogsConfig
+ MaxBreedsCount - максимальное количество пород, которые будут отображаться (по дефолту 10)

Важные моменты:
+ В первый раз загружается только базовая информация о породах - id, имя
+ При клике на породу, загружается детальная информация о породе - id, имя, описание. 
Можно спокойной увеличить кол-во получаемой информации, добавив в dto класс
+ Окно с описанием породы увеличивается в высоту, в зависимости от кол-ва текста, однако, 
если высота окна превысит предел, то появится скроллер с текстом 





